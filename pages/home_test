
     
       
            <div class="row">
            <div class="col-xs-12">
                <div data-ride="carousel" class="carousel slide" id="carousel-example-generic">
                  <!-- Indicators -->
                  <ol class="carousel-indicators" id="banner_indicator">
                    <script id="banner_template" type="x-tmpl-mustache">
                        <li data-slide-to="{{slide_number}}" data-target="#carousel-example-generic" class="{{active_carousel}}"></li>                        
                    </script>
                  </ol>
                
                
                
                
                
                  <!-- Wrapper for slides -->
                <div class="carousel-inner" id="home_banner">
                
                    <script id="banner_template" type="x-tmpl-mustache">
                   <div class="item">
                            <a href="{{url}}" {{css}} onclick="{{noLink}}">
                          <img alt="..." src="{{photo_url_abs}}">
                          </a>
                    </div>
                
                    </script>
                </div>
                
                  <!-- Controls -->
                  <a data-slide="prev" role="button" href="#carousel-example-generic" class="left carousel-control">
                    <span class="glyphicon glyphicon-chevron-left"></span>
                  </a>
                  <a data-slide="next" role="button" href="#carousel-example-generic" class="right carousel-control">
                    <span class="glyphicon glyphicon-chevron-right"></span>
                  </a>
                </div>
            </div>
        </div>
        
    <script>
    
        $(document).ready(function() {
        
            function renderPageData(){
                var repoList = getRepoList();
                renderIndicator('#indicator_template','#banner_indicator', repoList);
                renderBanner('#banner_template','#home_banner',repoList);
               
            }
            
            loadMallData(renderPageData);
        });


        
         function renderIndicator(banner_template, home_banner, repo){
    
    var item_list = [];
    var item_rendered = [];
    var banner_template_html = $(banner_template).html();
    Mustache.parse(banner_template_html);   // optional, speeds up future uses
    var bannerCount = 0;
    
    $.each( repo , function( key, val ) {
        if( val.name == "banner"){
            $.each( val.images , function( key, val ) {
                item_list.push(val);
            });
        }
    });
    item_list.sort(function(a, b){
        if(a.name < b.name) return -1;
        if(a.name > b.name) return 1;
        return 0;
    });
    $.each( item_list , function( key, val ) {
            bannerCount ++;
            if (bannerCount == 1){
                val.active_carousel = "active";
            }
            val.slide_number = bannerCount;
            var repo_rendered = Mustache.render(banner_template_html,val);
            item_rendered.push(repo_rendered);
    });
    
   
    $(home_banner).show();
    $(home_banner).html(item_rendered.join(''));
}
        
    </script>
