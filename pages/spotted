
<style>
    #lightbox .modal-content {
    display: inline-block;
    text-align: center;   
}

#lightbox .close {
    opacity: 1;
    color: rgb(255, 255, 255);
    background-color: rgb(25, 25, 25);
    padding: 5px 8px;
    border-radius: 30px;
    border: 2px solid rgb(255, 255, 255);
    position: absolute;
    width:37px;
    
    z-index:1032;
}

.modal-dialog .modal-content {
    border: 6px solid rgba(255, 255, 255, 0.5);
}
.thums-spotted{
    height: 210px;
    margin: 10px 10px 5px 0;
    width: 160px;
    float:left;
}
.thums-spotted img{
    max-height: 200px;
    max-width: 150px;
}
.spotted-title{
      color: #42245e;
    font-family: "AnneBonny-SemiBoldItalic";
    font-size: 18px;
    font-weight: 100;
    line-height: 1.42857;
    display:inline;
}
.modal-footer{
    text-align:center;
}
.spotted-description{
      color: #4d4d4f;
    display: block;
    font-family: "Maven Pro",Helvetica,Arial,sans-serif;
    font-size: 15px;
    line-height: 1.42857;
    margin-bottom: 5px;
}
@media(max-width:767px){
    .thums-spotted img{
        max-height: 150px;
        max-width: 130px;
    }
    .thums-spotted{
        height: 170px;
        margin: 10px 15px 5px 0;
        width: 130px;
        float:left;
    }
}
</style>

<div class="page-header ">
  <h1>
    Our Style  </h1>

  <div class="submenu">
  <ul>
<li class=""><a href="/style_all">All</a></li>
  <li><a href="/style_file">Style File</a></li>
<li ><a href="/shop">Shop the Look</a></li>
<li><a href="/attract">Opposites Attract</a></li>
<li class="current_page_item"><a href="/spotted">Spotted</a></li>
<li><a href="/consultations">Consultations</a></li>
<li><a href="/setters">Style Setters</a></li>
  </ul>
  </div>
  
</div>
    <div id ="spotted_id">
        <script id="spotted_template" type="x-tmpl-mustache">
            <div class="thums-spotted">
                <a href="#" class="thumbnail" data-toggle="modal" data-target="#lightbox" onclick="spottedLightbox(this)"> 
                    <img src="{{photo_url_abs}}" alt="{{description}}" title="{{name}}"  >
                </a>
            </div>
        </script>
    </div>
    
    
    <div id="lightbox" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog" id="modal-dialog">
        <button type="button" class="close " data-dismiss="modal" aria-hidden="true">×</button>
        <div class="modal-content">
            <div class="modal-body">
                <img class="spotted" src="" alt="" title=""/>
            </div>
            <div class="modal-footer">
                <span class="spotted-title"></span>
                 <span class="spotted-description"></span>
            </div>
        </div>
    </div>
</div>

<script>

  
        
    $(document).ready(function() {
        
        function renderPageData(){
            var repoList = getRepoList();
            renderSpotted('#spotted_template','#spotted_id', '#empty_spotted_id',repoList);
           
        }
        
        loadMallData(renderPageData);
        
        
        
        
   
    });
  
    function spottedLightbox(obj){
              if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.width <= 600) {
                   var maxWidth = 330;
                   var maxHeight = 330;
                }else{
                     var maxWidth = 565;
                   var maxHeight = 565;
                }
              
                var $lightbox = $('#lightbox');
                var $img = $(obj).find('img'), 
                src = $img.attr('src'),
                description = $img.attr('alt'),
                title = $img.attr('title'),
                
                css = {
                    'maxWidth': maxWidth,
                    'maxHeight': maxHeight
                };
          
           
            $lightbox.find('.spotted').attr('src', src);
            $lightbox.find('.spotted-description').text(description);
             $lightbox.find('.spotted-title').text(title)
            $lightbox.find('.spotted').css(css);
            
            
        $lightbox.on('shown.bs.modal', function (e) {
            var $img = $lightbox.find('.spotted');
            $('#modal-dialog').css({'width': $('.spotted').width()});
            $lightbox.find('.close').removeClass('hidden');
         });
       
        
       
    }
      function renderSpotted(spotted_template, not_empty_section_id, empty_section_id,repo){
                var item_list = [];
                var spotted_template_html = $(spotted_template).html();
                Mustache.parse(spotted_template_html);   // optional, speeds up future uses
        
                $.each( repo , function( key, val ) {
                    if( val.name == "spotted"){
                        $.each( val.images , function( key, val ) {
                            var repo_rendered = Mustache.render(spotted_template_html,val);
                            item_list.push(repo_rendered);
                        });
                    }
                });
                
                
               // var lightBox="<div id='lightbox' class='modal fade' tabindex='-1' role='dialog' aria-labelledby='myLargeModalLabel' aria-hidden='true'><div class='modal-dialog'><button type='button' class='close hidden' data-dismiss='modal' aria-hidden='true'>×</button><div class='modal-content'><div class='modal-body'><img src='' alt='' /></div></div></div></div>";
                var a = item_list.join('') ;
                if(repo.length > 0){
                    $(not_empty_section_id).show();
                    $(empty_section_id).hide();
                    $(not_empty_section_id).html(a);
                }else{
                    $(not_empty_section_id).hide();
                    $(empty_section_id).show();
                }
        }
</script>


